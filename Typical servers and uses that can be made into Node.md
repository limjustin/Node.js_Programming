# Chapter 00. 노드로 만들 수 있는 대표적인 서버와 용도

### 00-1 서버는 왜 필요할까?

**용어 정리**

- **API(Application Programming Interface)** : 프로그램을 **쉽게 제작**할 수 있게 **미리 만들어 놓은 것들**의 모음
- **클라이언트(Client)** : 다른 곳에 있는 단말에 **데이터를 달라고 요청**하는 프로그램
- **서버(Server)** : 다른 곳에서 **요청받은 명령을 처리**해 주는 프로그램
- **네트워크 카드(Network Card 또는 Ethernet Card)** : 우리가 프로그램을 **인터넷에 연결**하기 위해서 필요한 것
  - 서버는 **포트(Port)를 지정**하여 **해당 포트로 요청**을 받을 수 있음
    - **0 ~ 1023번** : 잘 알려진 포트(Well-Known Port)
    - **1024 ~ 49151번** : 등록된 포트(Registered Port)
    - **49152 ~ 65535번** : 동적 포트(Dynamic Port)
  - 따라서 **우리가 직접 만드는 서버 프로그램**은 보통 **1024번 이상의 포트 번호를 사용**할 것
- **웹 서버(Web Server)** : 서버 중에서 우리가 많이 사용하는 **웹 브라우저**에 접속하는 서버
- **프로토콜(Protocol)** : **데이터**를 서로 **어떤 형태**로 **주고 받을 것**인지 정한 통신 규약 (즉, **데이터의 형태**)
- **HTTP(Hypertext Transfer Protocol)** : 인터넷상에서 데이터를 주고 받기 위한 **서버/클라이언트 모델**을 따르는 프로토콜
  - 모든 웹 브라우저는 **HTTP 방식으로 데이터를 주고 받음**
  - 웹 브라우저에서 볼 수 있는 **웹 문서** : HTML, CSS, JS
  - 웹 브라우저가 웹 서버로부터 데이터를 전달 받으면, **웹 브라우저 화면에 웹 문서를 띄우게 됨**
  - 한번 **화면**에 띄운 웹 문서는 **필요할 때마다** 웹 서버로 **또 다른 웹 문서**를 **요청하여 받아 옴**
- **Ajax(Asynchronous Javascript And XML)** : 웹 서버에서 웹 문서를 받아오는 것이 아니라, **데이터만** 받아오기 위한 방법과 기술
  - 매번 웹 문서를 가져오지 않고 **필요한 데이터만 가져온 후** 화면을 **부분적으로 갱신**할 수 있기 때문에 **화면 처리 속도가 빨라지는 장점**이 있음


<br></br>
### 00-2 대표적인 서버 유형은 어떤 것이 있을까?

- 만들고자 하는 애플리케이션이 무엇인지에 따라 **필요한 서버 유형이 달라짐**
- **웹 서버는 모든 서버의 기본**
  - HTTP로 데이터를 주고받을 수 있는 웹 서버를 만들고 난 후,
    - 채팅 서버
    - 위치 기반 서비스 서버
    - 모바일 서버
    - JSON-RPC 서버
  - 위 서버들과 같은 **기능을 추가**해서 **새로운 서버**를 만들 수 있음


<br></br>
### 00-3 웹 서버의 기능은 무엇일까?

**웹 서버(Web Server)**

- **웹 브라우저에서 웹 문서를 요청**할 때 **필요한 기능을 수행**
- Node에서 제공하는 다양한 모듈을 사용하여 웹 서버를 만들 예정

**구현 방식**

- **웹 브라우저**에서 http://localhost:3000/... 과 같은 **사이트 주소를 입력**하고 **웹 서버에 요청**하면 웹 서버는 **미리 만들어 둔 웹 문서를 보내주는 방식**
  - **localhost는 무엇일까**
    - **PC 자신을 나타내는** 인터넷 주소
    - 인터넷 상에 있는 다른 PC나 단말에 연결하려고 할 때 IP와 같은 단말 주소를 사용하는데, 이때 **다른 단말이 아닌 자기 자신을 가리킬 때** localhost라고 함
    - 컴퓨터 **자기 자신이 서버**인 것

**모듈 설명**

- **익스프레스(Express)** : 웹 서버에 **필요한 파일들을 자동으로 만들어주는 웹 프레임워크**
- **몽고디비(MongoDB)** : **데이터를 저장하고 조회**할 수 있는 **데이터베이스**
- **뷰 템플릿(View Template)** : 클라이언트에 응답을 보낼 때 사용하려고 **미리 웹 문서의 원형(Template)을 만들어 놓은 것**
- **패스포트(Passport)** : 사용자 **로그인이나 회원가입 기능**을 쉽게 만들 수 있도록 해주는 것


<br></br>
### 00-4 채팅 서버의 중요한 기능은 무엇일까?

**채팅 서버(Chatting Server)**

- 일대일 채팅이나 그룹 채팅과 같은 **실시간 채팅 기능**을 클라이언트에서 사용하고 싶을 때 구현

**구현 방식**

- 클라이언트가 **채팅 서버(웹 서버 + 채팅 기능)에 접속**
- 로그인 후 **친구 목록**을 가져올 수 있음
- **채팅 메시지를 채팅 서버에 보내면** 일대일 채팅의 경우 상대방을 찾아 메시지를 보내고, 그룹 채팅일 경우 대화방에 들어와 있는 모든 사람에게 메시지를 보냄


<br></br>
### 00-5 JSON-RPC 서버의 중요한 기능은 무엇일까?

**JSON-RPC 서버(JSON-RPC Server)**

- **서버 쪽에 함수를 만들어 두고** **클라이언트에서 함수를 호출하듯이 데이터를 요청**하면 응답하는 서버
- 웹 문서가 아닌 **데이터만을 주고 받을 때 사용**
- **Ajax 방식 대신** 사용하기도 함
- **JSON(JavaScript Object Notation)** :  **어떤 형식**으로 데이터를 **주고 받을 지** 정해 놓은 **표준 데이터 포맷**
- **RPC(Remote Procedure Call)** : 네트워크로부터 **떨어져 있는 컴퓨터에서 코드를 실행**하는 방식 (**함수 호출하듯이 데이터 요청**)

**구현 방식**

- 클라이언트에서 서버 측으로 **데이터를 요청**
- 해당 **데이터**를 클라이언트로 넘겨줌

**장점**

- 서버 쪽에 구축해야 하는 기능을 **함수별로 명확히 구분**하여 만들 수 있음
- 서버의 **유지 관리가 쉬워짐**
- 핸들러(Handler)를 등록하면 이를 사용할 수 있음


<br></br>
### **00-6 위치 기반 서비스 서버의 중요한 기능은 무엇일까?**

**위치 기반 서비스 서버(Location-based Service Server)**

- **위치 정보를 저장하고 조회**할 때 사용
- **위치 기반 서비스 서버를 사용하는 이유**
  - 위도와 경도 두 가지 숫자 값을 데이터베이스에 그대로 저장하면 **데이터 양이 늘어나게 됨**
  - 두 개의 값을 한꺼번에 비교하여 조회한다면 **검색 속도가 현저하게 떨어짐**
  - **위치 정보를 효율적으로 저장하고 조회하는 별도의 방법**을 제공하는 것이 **위치 기반 서비스**인 것임

**구현 방식**

- 현재 위치에서 가장 가까운 카페를 찾아달라고 **위치 기반 서비스 서버에 요청**
- 카페와 관련 있는 데이터를 조회하려면 먼저 **카페에 관한 데이터를 저장**할 수 있어야 함
- 클라이언트에서 **카페에 관한 데이터를 확인**한 후, **서버에 데이터 추가를 요청**하면 위치 기반 서비스 서버에서 **요청 데이터를 받아 저장**
- 서버에서는 **현재 위치와 가장 가까운** 카페의 위치를 **데이터베이스에서 검색**
- 검색 속도가 떨어지지 않도록 **공간 인덱싱(Spatial Indexing)** 방법을 사용 (일반 데이터는 보통 **B-Tree 인덱싱** 방법을 사용함**)
  - **공간 인덱싱(Spatial Indexing)** : 2차원 공간 데이터를 빠르게 조회하기 위해 만든 **2차원 인덱싱 방법**


<br></br>
### 00-7 모바일 서버의 중요한 기능은 무엇일까?

**모바일 서버(Mobile Server)**

- **모바일 단말을 사용할 때 필요한 기능을 제공**하는 서버
- 웹 서버의 기능만으로도 충분히 기능을 구현할 수 있음
- 사용자가 어떤 모바일 단말을 사용하는지 알고 싶거나, 모바일 단말로 푸시 메시지를 보내고 싶은 경우에는 **모바일 전용 기능을 사용할 수 있도록** 모바일 서버라는 이름으로 서버 기능을 만들 수 있음

**구현 방식**

- 사실 웹 서버나 채팅 서버와 같은 서버 기능을 웹으로 만든 클라이언트에서 사용하는 것과 똑같이 사용할 수 있음
- **모바일 전용으로 사용하는 부분만**을 지칭할 것임
